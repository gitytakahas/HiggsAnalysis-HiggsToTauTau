(1) producing a droplist (not necessary if already provided via auxiliaries/pruning) :
./HiggsAnalysis/HiggsToTauTau/scripts/droplist-producer.sh
cp uncertainty-pruning-drop-yymmdd-sm.txt $PWD/auxiliaries/pruning/uncertainty-pruning-drop-yymmdd-sm.txt


(2) setup limit structure:
python HiggsAnalysis/HiggsToTauTau/scripts/doSM.py --label='-yymmdd-sm' --drop-list="$PWD/auxiliaries/pruning/uncertainty-pruning-drop-yymmdd-sm.txt" --config="HiggsAnalysis/HiggsToTauTau/data/limits.config-sm-yymmdd" --update-all --add-mutau-soft

(3) launch ML-fit:
submit.py --max-likelihood LIMITS-yymmdd-sm/hww-bg/*/*

(3a) blinded postfit plots (in HiggsAnalysis/HiggsToTauTau/test)
## setup postfit plots beginning to the end
python mlfit_and_copy.py --skip $CMSSW_BASE/src/LIMITS-yymmdd-sm/hww-bg/cmb/125
python produce_macros.py --config $CMSSW_BASE/src/HiggsAnalysis/HiggsToTauTau/data/limits.config-sm-yymmdd --hww-background
python run_macros.py --config $CMSSW_BASE/src/HiggsAnalysis/HiggsToTauTau/data/limits.config-sm-yymmdd
python summary_plots.py --config $CMSSW_BASE/src/HiggsAnalysis/HiggsToTauTau/data/limits.config-sm-yymmdd --hww-background


(4) launch/collect/plot Goodness-of-fit
## launch
submit.py --goodness-of-fit --toys 100 --cycles 10 LIMITS-yymmdd-sm/hww-bg/*/125
## collect
submit.py --goodness-of-fit --collect-injected-toys LIMITS-yymmdd-sm/hww-bg/*/125
## plotting
plot --goodness-of-fit HiggsAnalysis/HiggsToTauTau/python/layouts/goodness-of-fit.py LIMITS-yymmdd-sm/hww-bg/*


(5) limits and significances
## launch limit
lxb: submit.py --asymptotic LIMITS-yymmdd-sm/hww-bg/*/* --options "--expectedOnly"
lxq: submit.py --asymptotic LIMITS-yymmdd-sm/hww-bg/*/* --options "--expectedOnly" --lxq --queue="-l h_cpu=12:00:00 -j y -o /dev/null"
## plot limit
plot --asymptotic HiggsAnalysis/HiggsToTauTau/python/layouts/limit-sm.py LIMITS-yymmdd-mssm/hww-bg/* "expecteOnly=True"

## launch significance
lxb: submit.py --significance-frequentist --options "--expectedOnly" LIMITS-yymmdd-sm/hww-bg/*/*
lxq: submit.py --significance-frequentist --options "--expectedOnly" LIMITS-yymmdd-sm/hww-bg/*/* --lxq --queue="-l h_cpu=12:00:00 -j y -o /dev/null"
## plot significance
plot --significance-frequentist HiggsAnalysis/HiggsToTauTau/python/layouts/significance-sm.py LIMITS-yymmdd-sm/hww-bg/* "expecteOnly=True"


(5a) significance with error band
## launch toys
## ATTENTION: this spawns ~8000 jobs to the batch system
lxb: submit.py --injected --injected-method "--significance-frequentist" --toys 1000 --bunch-masses 1 LIMITS-yymmdd-sm/hww-bg/*/*
lxq: submit.py --injected --injected-method "--significance-frequentist" --toys 1000 --bunch-masses 1 LIMITS-yymmdd-sm/hww-bg/*/* --lxq --queue="-l h_cpu=12:00:00 -j y -o /dev/null"
## collect ggH-bbH 2d limits
lxb: submit.py --injected --injected-method "--significance-frequentist" --collect-injected-toys LIMITS-yymmdd-sm/hww-bg/*/*
lxq: submit.py --injected --injected-method "--significance-frequentist" --collect-injected-toys LIMITS-yymmdd-sm/hww-bg/*/* --lxq --queue="-l h_cpu=12:00:00 -j y -o /dev/null"
## plotting
plot --injected-sig HiggsAnalysis/HiggsToTauTau/python/layouts/significance-sm.py LIMITS-yymmdd-sm/hww-bg/* 'expectedOnly=True'

(6) unblinded postfit plots (in HiggsAnalysis/HiggsToTauTau/test)
## setup postfit plots beginning to the end
python mlfit_and_copy.py --skip $CMSSW_BASE/src/LIMITS-yymmdd-sm/hww-bg/cmb/125
python produce_macros.py --config $CMSSW_BASE/src/HiggsAnalysis/HiggsToTauTau/data/limits.config-sm-yymmdd-unblinded --hww-background
python run_macros.py --config $CMSSW_BASE/src/HiggsAnalysis/HiggsToTauTau/data/limits.config-sm-yymmdd-unblinded
python summary_plots.py --config $CMSSW_BASE/src/HiggsAnalysis/HiggsToTauTau/data/limits.config-sm-yymmdd-unblinded --hww-background

(7) limits and significances observed and expected
## launch limit
lxb: submit.py --asymptotic LIMITS-yymmdd-sm/hww-bg/*/*
lxq: submit.py --asymptotic LIMITS-yymmdd-sm/hww-bg/*/* --lxq --queue="-l h_cpu=12:00:00 -j y -o /dev/null"
## plot limit
plot --asymptotic HiggsAnalysis/HiggsToTauTau/python/layouts/limit-sm.py LIMITS-yymmdd-mssm/hww-bg/*

## launch significance
lxb: submit.py --significance-frequentist LIMITS-yymmdd-sm/hww-bg/*/*
lxq: submit.py --significance-frequentist LIMITS-yymmdd-sm/hww-bg/*/* --lxq --queue="-l h_cpu=12:00:00 -j y -o /dev/null"
## plot significance
plot --significance-frequentist HiggsAnalysis/HiggsToTauTau/python/layouts/significance-sm.py LIMITS-yymmdd-sm/hww-bg/*
